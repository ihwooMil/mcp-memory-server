"""Korean language patterns for AIMemory."""

from aimemory.i18n import LanguagePatterns, register

_PATTERNS = LanguagePatterns(
    # ── feedback_detector: positive memory patterns ──
    positive_feedback=[
        (r"맞(?:아|아요|습니다|잖아|잖아요|네|네요|죠|지|지요)", 0.95, "맞아+variants"),
        (r"맞(?:아|아요|습니다).*기억", 0.95, "맞아+기억"),
        (r"네\s*맞(?:아|아요|습니다)", 0.95, "네 맞아"),
        (r"정확(?:해|해요|합니다|하네|하네요|히)", 0.90, "정확+variants"),
        (r"기억(?:하고\s*있|하고\s*계시|해\s*주시|해\s*줘|해\s*주셨)", 0.90, "기억하고 있/해주시"),
        (r"잘\s*기억(?:하|하시|하네|하네요|하셨네|해)", 0.95, "잘 기억하+variants"),
        (r"기억(?:나|나요|나네|나네요|났어|났어요)", 0.85, "기억나+variants"),
        (r"기억(?:해\s*주셨|해\s*주시)(?:네요?|군요?)", 0.90, "기억해주셨네요"),
        (r"그랬(?:지|죠|잖아|잖아요|었지|었죠)", 0.80, "그랬지+variants"),
        (r"아\s*그때", 0.75, "아 그때"),
        (r"덕분에\s*(?:생각|기억)(?:났|나)", 0.80, "덕분에 생각/기억났다"),
        (r"그거\s*말하는\s*(?:거|건|거지|거죠)", 0.75, "그거 말하는 거지"),
        (r"완벽(?:해|해요|합니다|하네|하네요)", 0.85, "완벽+variants"),
        (r"딱\s*맞(?:아|아요|습니다)", 0.90, "딱 맞아"),
    ],
    # ── feedback_detector: negative memory patterns ──
    negative_feedback=[
        (r"기억\s*(?:안|못)\s*(?:나|해|하시|하세요|합니까)", 0.90, "기억 안/못 나/해"),
        (r"이미\s*말했(?:잖아|잖아요|는데|었는데)", 0.90, "이미 말했잖아"),
        (r"아까도\s*(?:말했|물어봤|얘기했)(?:잖아|잖아요|는데)", 0.90, "아까도 말했잖아"),
        (r"또\s*물어(?:봐|봐요|보세요|봅니까)\??", 0.85, "또 물어봐?"),
        (r"방금\s*(?:말했|얘기했)(?:잖아|는데|었는데)", 0.85, "방금 말했잖아"),
        (r"벌써\s*(?:잊어|까먹)(?:버렸|었|셨)", 0.85, "벌써 잊어버렸"),
        (r"아닌데(?:요)?", 0.80, "아닌데(요)"),
        (r"그게\s*아니(?:라|에요|야|거든|거든요)", 0.85, "그게 아니라"),
        (r"내가\s*(?:언제|그런\s*적)\s*(?:그랬|말했)(?:어|어요|냐|나요)", 0.90, "내가 언제 그랬어"),
        (r"(?:제|내)가\s*(?:언제|그런\s*적)\s*(?:그런|그랬)", 0.90, "제가 언제 그런"),
        (r"(?:잘못|틀리게)\s*(?:기억|알고)(?:하|하시|하셨)", 0.90, "잘못 기억하+variants"),
        (r"틀렸(?:어|어요|습니다|는데|는데요)", 0.85, "틀렸어+variants"),
        (r"(?:그건|그거)\s*(?:제|내)\s*(?:말|얘기)이?\s*아니", 0.85, "그건 내 말이 아니"),
        (r"착각(?:하|하시|하셨|인|이신)", 0.80, "착각+variants"),
    ],
    # ── feedback_detector: useful memory patterns ──
    useful_feedback=[
        (r"유용(?:하네|하네요|해|해요|합니다|한)", 0.80, "유용하네+variants"),
        (r"(?:도움|유용)(?:이\s*됐|이\s*돼|돼|됐|되네|되네요)", 0.80, "도움이 됐+variants"),
        (r"(?:알려|말해)\s*(?:줘서|주셔서)\s*(?:고마|감사|좋)", 0.80, "알려줘서 고마워"),
        (r"(?:그래|맞아).*(?:생각|기억)\s*(?:났|나)", 0.75, "그래서 생각났다"),
        (r"(?:좋은|유용한)\s*(?:정보|기억)", 0.75, "좋은 정보/기억"),
    ],
    # ── feedback_detector: correction pattern names ──
    correction_names=frozenset(
        {
            "아닌데(요)",
            "그게 아니라",
            "내가 언제 그랬어",
            "제가 언제 그런",
            "잘못 기억하+variants",
            "틀렸어+variants",
            "그건 내 말이 아니",
            "착각+variants",
        }
    ),
    # ── policy / StateEncoder ──
    question_pattern=r"[?\uff1f]|(?:인가요|나요|을까요|ㄹ까요|어요\?|습니까)",
    personal_info_patterns=[
        r"저는?\s+(.{2,20})(?:이에요|입니다|예요|인데|거든요|이라서)",
        r"제\s+(?:이름|나이|직업|전공|회사|팀|프로젝트)",
        r"살고\s*있(?:어요|습니다)",
        r"다니고\s*있(?:어요|습니다)",
        r"일하고\s*있(?:어요|습니다)",
    ],
    preference_patterns=[
        r"좋아(?:해요|합니다|하는|함)",
        r"싫어(?:해요|합니다|하는|함)",
        r"선호(?:해요|합니다|하는|함|하다)",
        r"취미(?:가|는|로)?",
        r"주로\s+\S+",
        r"즐겨\s*\S+",
    ],
    tech_keywords=(
        r"(?<![가-힣a-zA-Z_])(?:"
        r"Python|Java(?:Script)?|TypeScript|Rust|Go|C\+\+|Ruby|Swift|Kotlin|Dart|"
        r"React|Vue|Angular|Next\.js|Django|Flask|FastAPI|Spring|Rails|"
        r"Docker|Kubernetes|k8s|AWS|GCP|Azure|Linux|Ubuntu|macOS|Windows|"
        r"MySQL|PostgreSQL|SQLite|Redis|MongoDB|Elasticsearch|"
        r"Git|GitHub|GitLab|CI/CD|DevOps|MLOps|"
        r"pandas|numpy|scipy|sklearn|scikit-learn|TensorFlow|PyTorch|Keras|"
        r"LLM|GPT|Claude|Gemini|머신러닝|딥러닝|인공지능|AI|"
        r"API|REST|GraphQL|WebSocket|gRPC|"
        r"알고리즘|자료구조|데이터베이스|클라우드|마이크로서비스"
        r")(?![a-zA-Z_])"
    ),
    emotion_keywords=r"기쁨|슬프|화나|무서|불안|설레|걱정|힘들|어렵|좋아|싫어|즐거|행복|우울|피곤|신나",
    # ── policy / MemoryPolicyAgent ──
    discourse_markers=[
        "그건 그렇고",
        "아 맞다",
        "그나저나",
        "근데",
        "그런데",
        "참",
        "아참",
        "아 그리고",
        "그리고",
        "그래서",
        "그러면",
        "그러니까",
        "아 근데",
        "아무튼",
        "어쨌든",
        "얘기가 나온 김에",
        "그 얘기는 됐고",
        "다른 얘기인데",
        "주제를 바꿔서",
    ],
    # ── resolution ──
    subject_markers=r"([\w]+(?:는|은|이|가))",
    predicate_patterns=(
        r"([\w]+(?:를|을|에서|에|으로|로|와|과|하고))\s*"
        r"([\w]+(?:합니다|해요|했어요|입니다|이에요|예요|좋아|싫어|있어|없어|먹어|마셔))"
    ),
    verb_endings=(
        r"([\w]+(?:합니다|해요|했어요|입니다|이에요|예요|있어요|없어요|"
        r"좋아해요|싫어해요|먹어요|마셔요|좋아합니다))"
    ),
    verb_endings_fallback="",
    subject_strip=r"(는|은|이|가)$",
    # ── graph_retriever ──
    word_extraction_pattern=r"[가-힣]{2,}",
    negative_predicates=["싫어", "안 좋아", "못해", "안 해", "거부", "피하"],
    # ── implicit_detector ──
    dismissive_pattern=r"^(?:그래|응|네|음|아|오케이|ㅇㅇ|ㅇ|알겠어|알았어|그렇구나|그렇군)(?:요)?[.!]?$",
    # ── korean_patterns ──
    sentence_endings=[
        "ㅂ니다",
        "습니다",
        "입니다",
        "합니다",
        "아요",
        "어요",
        "여요",
        "거든요",
        "잖아요",
        "할게요",
        "할께요",
        "해주세요",
        "해줘요",
        "해줘",
        "할래요",
        "할래",
        "네요",
        "군요",
        "구나",
        "겠어요",
        "겠습니다",
        "이에요",
        "예요",
        "이야",
        "이라",
        "이죠",
        "죠",
    ],
    first_person=[
        "저는",
        "저도",
        "저한테",
        "저에게",
        "저의",
        "제가",
        "제",
        "나는",
        "나도",
        "나한테",
        "나에게",
        "내가",
        "내",
        "나야",
        "저야",
    ],
    emphasis=[
        "진짜",
        "정말",
        "너무",
        "완전",
        "엄청",
        "굉장히",
        "매우",
        "아주",
        "되게",
        "엄청나게",
        "진심으로",
        "절대적으로",
        "확실히",
        "특히",
        "정말로",
        "진짜로",
    ],
    preference_expressions=["항상", "언제나", "매번", "반드시"],
    constraint_expressions=[
        "절대",
        "절대로",
        "결코",
        "절대 안",
        "절대로 안",
        "하지 마",
        "하지 마세요",
        "하지 말아요",
    ],
    request_patterns=[
        "로 해주세요",
        "으로 해주세요",
        "로 해줘",
        "으로 해줘",
        "로 부탁해요",
        "로 해주시면",
        "게 해주세요",
        "게 해줘",
        "해주세요",
        "해줘요",
        "해줘",
        "부탁해요",
        "부탁드려요",
        "해주시겠어요",
        "해주실 수 있나요",
    ],
    positive_feedback_simple=[
        "맞아요",
        "맞아",
        "맞습니다",
        "맞네요",
        "정확해요",
        "정확합니다",
        "잘 이해하셨네요",
        "그렇죠",
        "그렇습니다",
        "네 맞아요",
        "네 맞습니다",
        "딱 맞아요",
        "완벽해요",
        "좋아요",
        "좋습니다",
        "감사해요",
        "고마워요",
        "잘 기억하시네요",
        "기억해주셨네요",
    ],
    negative_feedback_simple=[
        "아니 그게 아니라",
        "아니요 그게 아니라",
        "그게 아니라",
        "아닌데요",
        "아닙니다",
        "아니에요",
        "틀렸어요",
        "틀렸습니다",
        "잘못 이해하셨어요",
        "제가 말한 건 그게 아니라",
        "제 말은 그게 아니라",
        "다시 말씀드리면",
        "그건 제 말이 아니에요",
        "착각하신 것 같아요",
        "기억이 잘못되셨네요",
    ],
    clarification_patterns=[
        "무슨 말인지",
        "어떤 의미인지",
        "좀 더 설명해",
        "자세히 말해",
        "구체적으로 말해",
        "예를 들어",
        "다시 말해줘",
        "다시 설명해줘",
        "이해가 안 돼",
        "이해가 되지 않아",
        "잘 모르겠어",
        "무슨 뜻이에요",
        "어떤 뜻이에요",
    ],
    elaboration_patterns=[
        "더 구체적으로",
        "더 자세히",
        "좀 더 알려줘",
        "계속 말해줘",
        "이어서 말해줘",
        "더 말해줘",
        "추가로",
        "그리고 또",
    ],
    fact_utterance_patterns=["이에요", "예요", "입니다", "이야", "야", "아요", "어요"],
    preference_utterance_patterns=[
        "좋아해요",
        "좋아해",
        "좋아합니다",
        "싫어해요",
        "싫어해",
        "싫어합니다",
        "선호해요",
        "원해요",
        "원합니다",
        "하고 싶어요",
        "하고 싶어",
    ],
    experience_utterance_patterns=[
        "했어요",
        "했습니다",
        "했어",
        "해봤어요",
        "해봤어",
        "경험이 있어요",
        "경험했어요",
        "써봤어요",
        "써봤어",
        "가봤어요",
        "가봤어",
        "먹어봤어요",
    ],
    chars_per_token=2.5,
    substantive_pos_tags=frozenset({"NNG", "NNP", "NNB", "NR", "SL", "SH"}),
    proper_noun_tag="NNP",
    common_noun_tags=frozenset({"NNG", "NNB", "NR", "SL", "SH"}),
)

register("ko", _PATTERNS)
